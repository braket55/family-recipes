/* assets/css/theme-fantasy.css */

body.theme-fantasy {
  /* Fonts */
  --font-body: "Georgia", "Times New Roman", serif;
  --font-heading: "Georgia", "Times New Roman", serif;

  /* Background & surfaces */
  --bg: radial-gradient(circle at top, #fff8e3 0, #f7ecd3 35%, #f2e0bf 100%);
  --text: #3b2f2f;

  --surface: #fffaf0;
  --surface-elevated: #fbe9c6;

  --border-subtle: #e0d2b3;

  --accent: #9c4221;
  --accent-soft: #f6e0b5;
  --accent-text: #3b2f2f;

  --chip-bg: #f6e0b5;
  --chip-text: #3b2f2f;

  --badge-bg: #e9d8a6;
  --badge-text: #3b2f2f;

  --shadow-soft: 0 8px 18px rgba(0, 0, 0, 0.12);

  --button-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  --button-shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.2);

  --site-title-tracking: 0.04em;
  --site-title-transform: none;

  /* Breadcrumb colors */
  --breadcrumb-text: #5b4636;
  --breadcrumb-link: #9c4221;

  /* Slightly warmer checked text color for strike-through items */
  --checked-text: #8b714f;
}

/* Slight paper grain overlay */
body.theme-fantasy::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.05) 1px, transparent 0),
    radial-gradient(circle at 3px 3px, rgba(0, 0, 0, 0.02) 1px, transparent 0);
  background-size: 6px 6px, 8px 8px;
  opacity: 0.4;
  mix-blend-mode: multiply;
  z-index: -1;
}

/* Header / footer as gentle "book" bands */
body.theme-fantasy .site-header,
body.theme-fantasy .site-footer {
  border-bottom: 1px solid rgba(160, 130, 90, 0.5);
}

body.theme-fantasy .site-footer {
  border-top: 1px solid rgba(160, 130, 90, 0.5);
}

/* Recipe cards: parchment panels */
body.theme-fantasy .recipe-card {
  background: linear-gradient(135deg, #fff8e3 0%, #fffaf0 40%, #fbe9c6 100%);
  border-radius: 1rem;
  border: 1px solid rgba(160, 130, 90, 0.6);
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);
}

/* Section cards */
body.theme-fantasy .recipe-section {
  background: linear-gradient(135deg, #fff8e3 0%, #fffaf0 40%, #fbe9c6 100%);
  border-radius: 1rem;
  border: 1px solid rgba(160, 130, 90, 0.6);
  position: relative;
}

/* Tags + badges look like little scroll labels */
body.theme-fantasy .tag {
  border: 1px solid rgba(160, 130, 90, 0.75);
}

body.theme-fantasy .badge {
  border: 1px solid rgba(160, 130, 90, 0.75);
}

/* Links */
body.theme-fantasy a {
  color: #9c4221;
}

/* Fantasy: headings feel a bit more storybook */
body.theme-fantasy .recipe-section h2 {
  font-style: italic;
  letter-spacing: 0.04em;
}

/* Fantasy: inner dashed border like a page inset */
body.theme-fantasy .recipe-section::before {
  content: "";
  position: absolute;
  inset: 0.5rem;
  border-radius: 0.9rem;
  border: 1px dashed rgba(160, 130, 90, 0.45);
  pointer-events: none;
}

/* Fantasy-specific styling for checked ingredients/steps (the button itself) */
body.theme-fantasy .is-checked .check-btn {
  background: radial-gradient(
    circle at 30% 0%,
    #fef3c7 0,
    #d97706 35%,
    #92400e 100%
  );
  border-color: #b45309;
  box-shadow:
    0 0 0 1px rgba(180, 83, 9, 0.35),
    0 0 8px rgba(245, 158, 11, 0.75);
  /* tiny magical pulse when it becomes checked */
  animation: fantasy-sparkle 220ms ease-out;
}

body.theme-fantasy .is-checked .check-btn .check-icon::before {
  color: #fffaf0;
}

/* âœ¨ Fantasy sparkle animation for the check button */
@keyframes fantasy-sparkle {
  0% {
    transform: scale(0.85);
    box-shadow:
      0 0 0 0 rgba(180, 83, 9, 0.0),
      0 0 0 rgba(245, 158, 11, 0.0);
    filter: brightness(1);
  }
  45% {
    transform: scale(1.1) rotate(-0.5deg);
    box-shadow:
      0 0 0 1px rgba(180, 83, 9, 0.5),
      0 0 10px rgba(245, 158, 11, 0.9);
    filter: brightness(1.18);
  }
  100% {
    transform: scale(0.9) rotate(0deg);
    box-shadow:
      0 0 0 1px rgba(180, 83, 9, 0.35),
      0 0 8px rgba(245, 158, 11, 0.75);
    filter: brightness(1);
  }
}

/* ðŸ–‹ Fantasy type-in style text animation for checked items
   - Relies on .ingredient-text / .step-text being inline-block in base.css
   - Clip mask reveals text from left to right without changing layout,
     so no line-wrapping jitter at the edge of the screen. */
body.theme-fantasy .is-checked .ingredient-text,
body.theme-fantasy .is-checked .step-text {
  overflow: hidden;                       /* hide the unrevealed part */
  will-change: clip-path, opacity, color; /* hint for smoother animation */
  animation: fantasy-text-type 260ms steps(20, end);
}

/* Type-in effect: reveal line with a clipping mask */
@keyframes fantasy-text-type {
  from {
    clip-path: inset(0 100% 0 0);   /* fully hidden to the right */
    opacity: 0.7;
  }
  to {
    clip-path: inset(0 0 0 0);      /* fully revealed */
    opacity: 0.85;                  /* matches the slightly dimmer checked look */
  }
}